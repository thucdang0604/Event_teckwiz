import 'package:intl/intl.dart';

class EmailTemplates {
  static String _getHeader() {
    return '''
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
        <h1 style="color: white; margin: 0; font-size: 28px;">üéì College Event Management</h1>
    </div>
    ''';
  }

  static String _getFooter() {
    return '''
    <div style="text-align: center; margin-top: 20px; color: #6c757d; font-size: 12px;">
        <p>¬© 2024 College Event Management. All rights reserved.</p>
    </div>
    ''';
  }

  static String _getMainContent(String title, String content) {
    return '''
    <div style="background: #f8f9fa; padding: 30px; border-radius: 0 0 10px 10px; border: 1px solid #e9ecef;">
        <h2 style="color: #495057; margin-top: 0;">$title</h2>
        $content
    </div>
    ''';
  }

  static String buildEventRegistrationTemplate(Map<String, dynamic> data) {
    final eventTitle = data['eventTitle'] ?? 'Event';
    final eventDate = data['eventDate'] != null
        ? DateFormat(
            'dd/MM/yyyy HH:mm',
          ).format(DateTime.parse(data['eventDate']))
        : 'Not specified';
    final eventLocation = data['eventLocation'] ?? 'Not specified';
    final userName = data['userName'] ?? 'You';

    final content =
        '''
    <p style="font-size: 16px; margin-bottom: 25px;">
        Hello $userName!<br>
        You have successfully registered for the event.
    </p>
    
    <div style="background: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 2px solid #e9ecef;">
        <h3 style="color: #007bff; margin-top: 0;">üìÖ Event Information</h3>
        <p><strong>Event Name:</strong> $eventTitle</p>
        <p><strong>Date & Time:</strong> $eventDate</p>
        <p><strong>Location:</strong> $eventLocation</p>
    </div>
    
    <div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <p style="margin: 0; color: #155724; font-size: 14px;">
            ‚úÖ <strong>Registration Successful!</strong><br>
            You will receive a notification when your registration is approved.
        </p>
    </div>
    
    <p style="font-size: 14px; color: #6c757d; margin-top: 25px;">
        Thank you for participating in our event!
    </p>
    ''';

    return '''
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Event Registration Successful</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
        ${_getHeader()}
        ${_getMainContent('Event Registration Successful', content)}
        ${_getFooter()}
    </body>
    </html>
    ''';
  }

  static String buildEventReminderTemplate(Map<String, dynamic> data) {
    final eventTitle = data['eventTitle'] ?? 'Event';
    final eventDate = data['eventDate'] != null
        ? DateFormat(
            'dd/MM/yyyy HH:mm',
          ).format(DateTime.parse(data['eventDate']))
        : 'Not specified';
    final eventLocation = data['eventLocation'] ?? 'Not specified';
    final userName = data['userName'] ?? 'You';
    final reminderType = data['reminderType'] ?? '24h';

    String reminderText = '';
    if (reminderType == '24h') {
      reminderText = 'S·ª± ki·ªán s·∫Ω di·ªÖn ra trong 24 gi·ªù t·ªõi';
    } else if (reminderType == '1h') {
      reminderText = 'S·ª± ki·ªán s·∫Ω di·ªÖn ra trong 1 gi·ªù t·ªõi';
    } else {
      reminderText = 'S·ª± ki·ªán s·∫Øp di·ªÖn ra';
    }

    final content =
        '''
    <p style="font-size: 16px; margin-bottom: 25px;">
        Hello $userName!<br>
        $reminderText
    </p>
    
    <div style="background: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 2px solid #e9ecef;">
        <h3 style="color: #007bff; margin-top: 0;">üìÖ Event Information</h3>
        <p><strong>Event Name:</strong> $eventTitle</p>
        <p><strong>Date & Time:</strong> $eventDate</p>
        <p><strong>Location:</strong> $eventLocation</p>
    </div>
    
    <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <p style="margin: 0; color: #856404; font-size: 14px;">
            ‚è∞ <strong>Nh·∫Øc nh·ªü:</strong><br>
            Vui l√≤ng c√≥ m·∫∑t ƒë√∫ng gi·ªù ƒë·ªÉ tham gia s·ª± ki·ªán.
        </p>
    </div>
    
    <p style="font-size: 14px; color: #6c757d; margin-top: 25px;">
        Ch√∫c b·∫°n c√≥ tr·∫£i nghi·ªám tuy·ªát v·ªùi t·∫°i s·ª± ki·ªán!
    </p>
    ''';

    return '''
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Nh·∫Øc nh·ªü s·ª± ki·ªán</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
        ${_getHeader()}
        ${_getMainContent('Nh·∫Øc nh·ªü s·ª± ki·ªán', content)}
        ${_getFooter()}
    </body>
    </html>
    ''';
  }

  static String buildEventCancellationTemplate(Map<String, dynamic> data) {
    final eventTitle = data['eventTitle'] ?? 'Event';
    final eventDate = data['eventDate'] != null
        ? DateFormat(
            'dd/MM/yyyy HH:mm',
          ).format(DateTime.parse(data['eventDate']))
        : 'Not specified';
    final reason = data['reason'] ?? 'L√Ω do kh√¥ng ƒë∆∞·ª£c cung c·∫•p';
    final userName = data['userName'] ?? 'You';

    final content =
        '''
    <p style="font-size: 16px; margin-bottom: 25px;">
        Hello $userName!<br>
        Ch√∫ng t√¥i r·∫•t ti·∫øc ph·∫£i th√¥ng b√°o r·∫±ng s·ª± ki·ªán ƒë√£ b·ªã h·ªßy.
    </p>
    
    <div style="background: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 2px solid #e9ecef;">
        <h3 style="color: #dc3545; margin-top: 0;">‚ùå Event Information b·ªã h·ªßy</h3>
        <p><strong>Event Name:</strong> $eventTitle</p>
        <p><strong>Th·ªùi gian d·ª± ki·∫øn:</strong> $eventDate</p>
        <p><strong>L√Ω do h·ªßy:</strong> $reason</p>
    </div>
    
    <div style="background: #f8d7da; border: 1px solid #f5c6cb; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <p style="margin: 0; color: #721c24; font-size: 14px;">
            ‚ö†Ô∏è <strong>Th√¥ng b√°o quan tr·ªçng:</strong><br>
            N·∫øu b·∫°n ƒë√£ thanh to√°n ph√≠ tham gia, ch√∫ng t√¥i s·∫Ω ho√†n ti·ªÅn trong v√≤ng 3-5 ng√†y l√†m vi·ªác.
        </p>
    </div>
    
    <p style="font-size: 14px; color: #6c757d; margin-top: 25px;">
        Ch√∫ng t√¥i xin l·ªói v√¨ s·ª± b·∫•t ti·ªán n√†y v√† hy v·ªçng ƒë∆∞·ª£c ph·ª•c v·ª• b·∫°n trong c√°c s·ª± ki·ªán ti·∫øp theo.
    </p>
    ''';

    return '''
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>S·ª± ki·ªán ƒë√£ b·ªã h·ªßy</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
        ${_getHeader()}
        ${_getMainContent('S·ª± ki·ªán ƒë√£ b·ªã h·ªßy', content)}
        ${_getFooter()}
    </body>
    </html>
    ''';
  }

  static String buildRegistrationApprovalTemplate(Map<String, dynamic> data) {
    final eventTitle = data['eventTitle'] ?? 'Event';
    final eventDate = data['eventDate'] != null
        ? DateFormat(
            'dd/MM/yyyy HH:mm',
          ).format(DateTime.parse(data['eventDate']))
        : 'Not specified';
    final eventLocation = data['eventLocation'] ?? 'Not specified';
    final userName = data['userName'] ?? 'You';

    final content =
        '''
    <p style="font-size: 16px; margin-bottom: 25px;">
        Hello $userName!<br>
        ƒêƒÉng k√Ω tham gia s·ª± ki·ªán c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c duy·ªát.
    </p>
    
    <div style="background: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 2px solid #e9ecef;">
        <h3 style="color: #28a745; margin-top: 0;">‚úÖ Event Information</h3>
        <p><strong>Event Name:</strong> $eventTitle</p>
        <p><strong>Date & Time:</strong> $eventDate</p>
        <p><strong>Location:</strong> $eventLocation</p>
    </div>
    
    <div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <p style="margin: 0; color: #155724; font-size: 14px;">
            üéâ <strong>Ch√∫c m·ª´ng!</strong><br>
            B·∫°n ƒë√£ ƒë∆∞·ª£c ch·∫•p nh·∫≠n tham gia s·ª± ki·ªán. Vui l√≤ng c√≥ m·∫∑t ƒë√∫ng gi·ªù.
        </p>
    </div>
    
    <p style="font-size: 14px; color: #6c757d; margin-top: 25px;">
        Ch√∫c b·∫°n c√≥ tr·∫£i nghi·ªám tuy·ªát v·ªùi t·∫°i s·ª± ki·ªán!
    </p>
    ''';

    return '''
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ƒêƒÉng k√Ω ƒë∆∞·ª£c duy·ªát</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
        ${_getHeader()}
        ${_getMainContent('ƒêƒÉng k√Ω ƒë∆∞·ª£c duy·ªát', content)}
        ${_getFooter()}
    </body>
    </html>
    ''';
  }

  static String buildRegistrationRejectionTemplate(Map<String, dynamic> data) {
    final eventTitle = data['eventTitle'] ?? 'Event';
    final reason = data['reason'] ?? 'Kh√¥ng ƒë·ªß ƒëi·ªÅu ki·ªán tham gia';
    final userName = data['userName'] ?? 'You';

    final content =
        '''
    <p style="font-size: 16px; margin-bottom: 25px;">
        Hello $userName!<br>
        Ch√∫ng t√¥i r·∫•t ti·∫øc ph·∫£i th√¥ng b√°o r·∫±ng ƒëƒÉng k√Ω tham gia s·ª± ki·ªán c·ªßa b·∫°n kh√¥ng ƒë∆∞·ª£c ch·∫•p nh·∫≠n.
    </p>
    
    <div style="background: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 2px solid #e9ecef;">
        <h3 style="color: #dc3545; margin-top: 0;">‚ùå Event Information</h3>
        <p><strong>Event Name:</strong> $eventTitle</p>
        <p><strong>L√Ω do t·ª´ ch·ªëi:</strong> $reason</p>
    </div>
    
    <div style="background: #f8d7da; border: 1px solid #f5c6cb; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <p style="margin: 0; color: #721c24; font-size: 14px;">
            ‚ÑπÔ∏è <strong>Th√¥ng tin:</strong><br>
            N·∫øu b·∫°n ƒë√£ thanh to√°n ph√≠ tham gia, ch√∫ng t√¥i s·∫Ω ho√†n ti·ªÅn trong v√≤ng 3-5 ng√†y l√†m vi·ªác.
        </p>
    </div>
    
    <p style="font-size: 14px; color: #6c757d; margin-top: 25px;">
        Ch√∫ng t√¥i hy v·ªçng ƒë∆∞·ª£c ph·ª•c v·ª• b·∫°n trong c√°c s·ª± ki·ªán ti·∫øp theo.
    </p>
    ''';

    return '''
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ƒêƒÉng k√Ω b·ªã t·ª´ ch·ªëi</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
        ${_getHeader()}
        ${_getMainContent('ƒêƒÉng k√Ω b·ªã t·ª´ ch·ªëi', content)}
        ${_getFooter()}
    </body>
    </html>
    ''';
  }

  static String buildEventApprovalTemplate(Map<String, dynamic> data) {
    final eventTitle = data['eventTitle'] ?? 'Event';
    final eventDate = data['eventDate'] != null
        ? DateFormat(
            'dd/MM/yyyy HH:mm',
          ).format(DateTime.parse(data['eventDate']))
        : 'Not specified';
    final organizerName = data['organizerName'] ?? 'You';

    final content =
        '''
    <p style="font-size: 16px; margin-bottom: 25px;">
        Ch√†o $organizerName!<br>
        S·ª± ki·ªán c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c duy·ªát v√† xu·∫•t b·∫£n th√†nh c√¥ng.
    </p>
    
    <div style="background: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 2px solid #e9ecef;">
        <h3 style="color: #28a745; margin-top: 0;">‚úÖ Event Information</h3>
        <p><strong>Event Name:</strong> $eventTitle</p>
        <p><strong>Date & Time:</strong> $eventDate</p>
    </div>
    
    <div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <p style="margin: 0; color: #155724; font-size: 14px;">
            üéâ <strong>Ch√∫c m·ª´ng!</strong><br>
            S·ª± ki·ªán c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát v√† hi·ªán ƒëang hi·ªÉn th·ªã cho t·∫•t c·∫£ ng∆∞·ªùi d√πng.
        </p>
    </div>
    
    <p style="font-size: 14px; color: #6c757d; margin-top: 25px;">
        Ch√∫c b·∫°n t·ªï ch·ª©c s·ª± ki·ªán th√†nh c√¥ng!
    </p>
    ''';

    return '''
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>S·ª± ki·ªán ƒë∆∞·ª£c duy·ªát</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
        ${_getHeader()}
        ${_getMainContent('S·ª± ki·ªán ƒë∆∞·ª£c duy·ªát', content)}
        ${_getFooter()}
    </body>
    </html>
    ''';
  }

  static String buildEventRejectionTemplate(Map<String, dynamic> data) {
    final eventTitle = data['eventTitle'] ?? 'Event';
    final reason = data['reason'] ?? 'Kh√¥ng ƒë√°p ·ª©ng y√™u c·∫ßu';
    final organizerName = data['organizerName'] ?? 'You';

    final content =
        '''
    <p style="font-size: 16px; margin-bottom: 25px;">
        Ch√†o $organizerName!<br>
        Ch√∫ng t√¥i r·∫•t ti·∫øc ph·∫£i th√¥ng b√°o r·∫±ng s·ª± ki·ªán c·ªßa b·∫°n kh√¥ng ƒë∆∞·ª£c duy·ªát.
    </p>
    
    <div style="background: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 2px solid #e9ecef;">
        <h3 style="color: #dc3545; margin-top: 0;">‚ùå Event Information</h3>
        <p><strong>Event Name:</strong> $eventTitle</p>
        <p><strong>L√Ω do t·ª´ ch·ªëi:</strong> $reason</p>
    </div>
    
    <div style="background: #f8d7da; border: 1px solid #f5c6cb; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <p style="margin: 0; color: #721c24; font-size: 14px;">
            ‚ÑπÔ∏è <strong>Th√¥ng tin:</strong><br>
            B·∫°n c√≥ th·ªÉ ch·ªânh s·ª≠a s·ª± ki·ªán v√† g·ª≠i l·∫°i ƒë·ªÉ xem x√©t.
        </p>
    </div>
    
    <p style="font-size: 14px; color: #6c757d; margin-top: 25px;">
        Ch√∫ng t√¥i hy v·ªçng ƒë∆∞·ª£c h·ªó tr·ª£ b·∫°n trong c√°c s·ª± ki·ªán ti·∫øp theo.
    </p>
    ''';

    return '''
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>S·ª± ki·ªán b·ªã t·ª´ ch·ªëi</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
        ${_getHeader()}
        ${_getMainContent('S·ª± ki·ªán b·ªã t·ª´ ch·ªëi', content)}
        ${_getFooter()}
    </body>
    </html>
    ''';
  }

  static String buildWelcomeTemplate(Map<String, dynamic> data) {
    final userName = data['userName'] ?? 'You';
    final userRole = data['userRole'] ?? 'Sinh vi√™n';

    final content =
        '''
    <p style="font-size: 16px; margin-bottom: 25px;">
        Ch√†o m·ª´ng $userName!<br>
        Ch√∫c m·ª´ng b·∫°n ƒë√£ tham gia v√†o h·ªá th·ªëng College Event Management.
    </p>
    
    <div style="background: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 2px solid #e9ecef;">
        <h3 style="color: #007bff; margin-top: 0;">üëã Th√¥ng tin t√†i kho·∫£n</h3>
        <p><strong>T√™n:</strong> $userName</p>
        <p><strong>Vai tr√≤:</strong> $userRole</p>
    </div>
    
    <div style="background: #d1ecf1; border: 1px solid #bee5eb; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <p style="margin: 0; color: #0c5460; font-size: 14px;">
            üí° <strong>B·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng:</strong><br>
            ‚Ä¢ Kh√°m ph√° c√°c s·ª± ki·ªán th√∫ v·ªã<br>
            ‚Ä¢ ƒêƒÉng k√Ω tham gia s·ª± ki·ªán<br>
            ‚Ä¢ T·∫°o s·ª± ki·ªán c·ªßa ri√™ng b·∫°n (n·∫øu l√† organizer)
        </p>
    </div>
    
    <p style="font-size: 14px; color: #6c757d; margin-top: 25px;">
        Ch√∫c b·∫°n c√≥ tr·∫£i nghi·ªám tuy·ªát v·ªùi v·ªõi h·ªá th·ªëng!
    </p>
    ''';

    return '''
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ch√†o m·ª´ng ƒë·∫øn v·ªõi College Event Management</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
        ${_getHeader()}
        ${_getMainContent('Ch√†o m·ª´ng!', content)}
        ${_getFooter()}
    </body>
    </html>
    ''';
  }

  static String buildCertificateIssuedTemplate(Map<String, dynamic> data) {
    final eventTitle = data['eventTitle'] ?? 'Event';
    final userName = data['userName'] ?? 'You';
    final certificateNumber = data['certificateNumber'] ?? 'N/A';
    final issuedDate = data['issuedDate'] != null
        ? DateFormat('dd/MM/yyyy').format(DateTime.parse(data['issuedDate']))
        : DateFormat('dd/MM/yyyy').format(DateTime.now());

    final content =
        '''
    <p style="font-size: 16px; margin-bottom: 25px;">
        Congratulations $userName!<br>
        You have successfully received a certificate for participating in the event.
    </p>
    
    <div style="background: white; padding: 25px; border-radius: 8px; margin: 25px 0; border: 2px solid #e9ecef;">
        <h3 style="color: #28a745; margin-top: 0;">üèÜ Certificate Information</h3>
        <p><strong>Event Name:</strong> $eventTitle</p>
        <p><strong>Certificate Number:</strong> $certificateNumber</p>
        <p><strong>Issued Date:</strong> $issuedDate</p>
    </div>
    
    <div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <p style="margin: 0; color: #155724; font-size: 14px;">
            üéâ <strong>Congratulations!</strong><br>
            This certificate recognizes your participation and achievement in the event.
        </p>
    </div>
    
    <p style="font-size: 14px; color: #6c757d; margin-top: 25px;">
        Thank you for your participation and we look forward to seeing you in future events!
    </p>
    ''';

    return '''
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Certificate Issued - College Event Management</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
        ${_getHeader()}
        ${_getMainContent('Certificate Issued', content)}
        ${_getFooter()}
    </body>
    </html>
    ''';
  }
}
